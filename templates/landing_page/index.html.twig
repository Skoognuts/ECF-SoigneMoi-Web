{% extends 'base.html.twig' %}

{% block title %}Accueil{% endblock %}

{% block body %}

    <div id="cookieNotice" class="cookie-notice-wrapper" style="display: flex;">
        <div class="cookie-notice">
            <div id="closeIcon" style="display: none;"></div>
            <h4 class="mb-3">üç™ Nous avons des cookies üç™</h4>
            <p class="cookie-text">Cette application utilise des cookies ou des technologies similaires afin de proposer une exp√©rience de navigation optimale ainsi que des recommandations personnalis√©es. En poursuivant votre navigation, vous acceptez nos <b><a href="{{ path('app_cgu') }}">Conditions G√©n√©rales d'Utilisation</a></b>.</p>
            <div class="btn-wrap w-100 d-flex flex-row justify-content-center">
                <button class="btn btn-primary" onclick="acceptCookieConsent();">Continuer</button>
            </div>
        </div>
    </div>

    {{ include('_parts/_header.html.twig') }}

    <main>
        <img class="w-100 m-0" src="{{ asset('images/overview.jpg') }}">

    </main>

    {{ include('_parts/_footer.html.twig') }}

    <script>
        // Cr√©ation du Cookie de Consentement
        const cookieNotice = document.getElementById('cookieNotice');
        function setCookie(cname, cvalue, exdays) {
            const d = new Date();
            d.setTime(d.getTime() + (exdays*24*60*60*1000));
            let expires = "expires="+ d.toUTCString();
            document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
        }

        // Suppression du Cookie de Consentement
        function deleteCookie(cname) {
            const d = new Date();
            d.setTime(d.getTime() + (24*60*60*1000));
            let expires = "expires="+ d.toUTCString();
            document.cookie = cname + "=;" + expires + ";path=/";
        }

        // Lecture du Cookie de Consentement
        function getCookie(cname) {
            let name = cname + "=";
            let decodedCookie = decodeURIComponent(document.cookie);
            let ca = decodedCookie.split(';');
            for(let i = 0; i <ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                }
            }
            return "";
        }

        // Parametrage du Cookie de Consentement
        function acceptCookieConsent(){
            deleteCookie('user_cookie_consent');
            setCookie('user_cookie_consent', 1, 30);
            cookieNotice.style.display = "none";
        }

        // V√©rification du cookie de consentement
        let cookie_consent = getCookie("user_cookie_consent");
        if(cookie_consent != ""){
            cookieNotice.style.display = "none";
        }else{
            cookieNotice.style.display = "flex";
        }
    </script>

{% endblock %}
